---
title: "doas — полегшена альтернатива sudo"
date: "2020-03-12"
description: "Утиліта для Linux і *BSD doas керує дозволами користувачів без усієї зайвини sudo. Лише вставте два рядки в файл конфіґурації! Дивіться як."
tags: ["Linux", "BSD"]
---

Якщо ви користуєтеся Лінуксом лише на **домашньому комп'ютері**, то скоріш за все вам не потрібна уся та розширена функціональність `sudo`, яка тримає в собі 30 років історії розвитку проекту.

**OpenBSD**, початково Тед Унанґст, свого часу створили **doas**, дуже легку утиліту, щоб керувати дозволами користувачів. Як стверджує <a href="https://github.com/Duncaen/OpenDoas" target="\_blank" rel="noopener noreferrer">офіційна документація</a>, `doas`
>*"надає 95% функціональності sudo з дрібкою основної бази коду".*

Далебі, `sudo` важить близько 5мб, натомість `doas` доходить лише до кількох кілобайтів.

Кілька років як `doas` вже портована на GNU/Linux і на FreeBSD.

Отаман Вочевидячки підказує: щоб користуватися `doas`, треба спершу його встановити:

Ubuntu/Debian:
```bash
apt install doas
```

Gentoo:
```bash
emerge -a doas
```

FreeBSD:
```bash
pkg install doas
```

Коли встановилося, треба створити файл конфіґу [tt]doas.conf[/tt], котрий наразі не існує.

В Лінуксі цільова директорія для файлу має бути `/etc/`, у FreeBSD — `/usr/local/etc/`.

Скористуйтеся текстовим редактором вашого вибору, щоб створити файл. Я користуюся Vim'ом:

```bash
vim /etc/doas.conf
```

або для більш упорядкованого FreeBSD:

```bash
vim /usr/local/etc/doas.conf
```

І додаєте два рядки, щоб активувати дозволи для користувача:

```bash
permit nopass keepenv :wheel
permit nopass keepenv root as root
```
Так, усього лиш два! На противагу купі визначень у конфіґурації `sudo`.

Звісно ж, ваш обраний користувач має бути в групі `wheel`.

Можна додавати й по імені користувача замість імені групи — `:bebyx`, приміром.

Відтак вводьте команди з `doas` попереду замість `sudo` — і всьо буде чотко. Наприклад:

```bash
doas emerge -uaDN @world
```

Якщо не хочете давати безпарольного доступу користувачеві, замість [tt]nopass[/tt] поставте `persist`:

```
permit persist keepenv :wheel
```

Це ввімкне стандартну в `sudo` функцію просити пароля лише вперше за сесію.

Докладніше про трюки в `doas` можна почитати англійською: <a href="https://flak.tedunangst.com/post/doas-mastery" target="\_blank" rel="noopener noreferrer"></a>
