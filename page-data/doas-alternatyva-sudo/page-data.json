{"componentChunkName":"component---src-templates-blog-post-js","path":"/doas-alternatyva-sudo/","result":{"data":{"markdownRemark":{"id":"a3beb636-9b1b-5d0d-a028-e52f935e32f4","html":"<p>Якщо ви користуєтеся Лінуксом лише на <strong>домашньому комп'ютері</strong>, то скоріш за все вам не потрібна уся та розширена функціональність <code>sudo</code>, яка тримає в собі 30 років історії розвитку проекту.</p>\n<p><strong>OpenBSD</strong>, початково Тед Унанґст, свого часу створили <strong>doas</strong>, дуже легку утиліту, щоб керувати дозволами користувачів. Як стверджує <a href=\"https://github.com/Duncaen/OpenDoas\" target=\"\\_blank\" rel=\"noopener noreferrer\">офіційна документація</a>, <code>doas</code></p>\n<blockquote>\n<p><em>\"надає 95% функціональності sudo з дрібкою основної бази коду\".</em></p>\n</blockquote>\n<p>Далебі, <code>sudo</code> важить близько 5мб, натомість <code>doas</code> доходить лише до кількох кілобайтів.</p>\n<p>Кілька років як <code>doas</code> вже портована на GNU/Linux і на FreeBSD.</p>\n<p>Отаман Вочевидячки підказує: щоб користуватися <code>doas</code>, треба спершу його встановити:</p>\n<p>Ubuntu/Debian:</p>\n<pre><code class=\"language-bash\">apt install doas\n</code></pre>\n<p>Gentoo:</p>\n<pre><code class=\"language-bash\">emerge -a doas\n</code></pre>\n<p>FreeBSD:</p>\n<pre><code class=\"language-bash\">pkg install doas\n</code></pre>\n<p>Коли встановилося, треба створити файл конфіґу <code>doas.conf</code>, котрий наразі не існує.</p>\n<p>В Лінуксі цільова директорія для файлу має бути <code>/etc/</code>, у FreeBSD — <code>/usr/local/etc/</code>.</p>\n<p>Скористуйтеся текстовим редактором вашого вибору, щоб створити файл. Я користуюся Vim'ом:</p>\n<pre><code class=\"language-bash\">vim /etc/doas.conf\n</code></pre>\n<p>або для більш упорядкованого FreeBSD:</p>\n<pre><code class=\"language-bash\">vim /usr/local/etc/doas.conf\n</code></pre>\n<p>І додаєте два рядки, щоб активувати дозволи для користувача:</p>\n<pre><code class=\"language-bash\">permit nopass keepenv :wheel\npermit nopass keepenv root as root\n</code></pre>\n<p>Так, усього лиш два! На противагу купі визначень у конфіґурації <code>sudo</code>.</p>\n<p>Звісно ж, ваш обраний користувач має бути в групі <code>wheel</code>.</p>\n<p>Можна додавати й по імені користувача замість імені групи — <code>:bebyx</code>, приміром.</p>\n<p>Відтак вводьте команди з <code>doas</code> попереду замість <code>sudo</code> — і всьо буде чотко. Наприклад:</p>\n<pre><code class=\"language-bash\">doas emerge -uaDN @world\n</code></pre>\n<p>Якщо не хочете давати безпарольного доступу користувачеві, замість <code>nopass</code> поставте <code>persist</code>:</p>\n<pre><code>permit persist keepenv :wheel\n</code></pre>\n<p>Це ввімкне стандартну в <code>sudo</code> функцію просити пароля лише вперше за сесію.</p>\n<p>Докладніше про трюки в <code>doas</code> можна почитати англійською: <a href=\"https://flak.tedunangst.com/post/doas-mastery\" target=\"\\_blank\" rel=\"noopener noreferrer\">flak.tedunangst.com/post/doas-mastery</a></p>","frontmatter":{"title":"doas — полегшена альтернатива sudo","description":"Утиліта для Linux і *BSD doas керує дозволами користувачів без усієї зайвини sudo. Лише вставте два рядки в файл конфіґурації! Дивіться як.","date":"12 березня, 2020","tags":["Linux","BSD"]},"excerpt":"Якщо ви користуєтеся Лінуксом лише на домашньому комп'ютері, то скоріш за все вам не потрібна уся та розширена функціональність sudo, яка…"}},"pageContext":{"slug":"/doas-alternatyva-sudo/","previous":{"fields":{"slug":"/mova-test/"},"frontmatter":{"title":"Чи розмовляєш ти українською?","tags":["мова"]}},"next":null}}}